{"version":3,"sources":["components/Blog.js","components/Footer.js","components/Notification.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","title","author","url","user","name","Footer","style","color","fontStyle","fontSize","Notification","message","type","className","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","id","put","setToken","newToken","login","credentials","App","useState","blogs","setBlogs","newTitle","setNewTitle","newAuthor","setNewAuthor","newUrl","setNewUrl","errorMessage","setErrorMessage","setNotificationType","username","setUsername","password","setPassword","setUser","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","console","log","JSON","parse","addBlog","event","preventDefault","target","blogObject","returnedBlog","concat","setTimeout","handleLogin","loginService","setItem","stringify","handleBlogAuthorChange","value","handleBlogTitleChange","handleBlogUrlChange","onSubmit","onChange","map","i","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff3ab2a8.chunk.js","sourcesContent":["import React from 'react'\r\nconst Blog = ({ blog }) => (\r\n  <div>\r\n    {blog.title} by {blog.author} : {blog.url} created by {blog.user === null ? '' : blog.user.name}\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  const footerStyle = {\r\n    color: 'green',\r\n    fontStyle: 'italic',\r\n    fontSize: 16\r\n  }\r\n\r\n  return (\r\n    <div style={footerStyle}>\r\n      <br />\r\n      <em>Note app, by Andrei</em>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Footer","import React from 'react'\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={type}>{message}</div>;\r\n};\r\n\r\nexport default Notification","import axios from 'axios';\nconst baseUrl = '/api/blogs';\n\nlet token = null;\nconst setToken = (newToken) => {\n  token = `bearer ${newToken}`;\n};\n\nconst get = (id) => {\n  const request = axios.get(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = async (newObject) => {\n  const config = { headers: { Authorization: token } };\n  const response = await axios.post(baseUrl, newObject, config);\n\n  return response.data;\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, update, setToken };\n","import axios from 'axios';\r\nconst baseUrl = '/api/login';\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\n\r\nexport default { login };\r\n","import React, { useState, useEffect } from 'react';\n\nimport Blog from './components/Blog';\nimport Footer from './components/Footer';\nimport Notification from './components/Notification';\n\nimport blogService from './services/blogs';\nimport loginService from './services/login';\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([]);\n  const [showAll, setShowAll] = useState(true);\n\n  // const [newBlog, setNewBlog] = useState({});\n  const [newTitle, setNewTitle] = useState('title...');\n  const [newAuthor, setNewAuthor] = useState('author...');\n  const [newUrl, setNewUrl] = useState('url...');\n\n  const [errorMessage, setErrorMessage] = useState('');\n  const [notificationType, setNotificationType] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    blogService.getAll().then((blogs) => setBlogs(blogs));\n  }, []);\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser');\n    console.log(loggedUserJSON);\n    if (loggedUserJSON) {\n  console.log(\"inside loggedUserJSON\");\n\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  debugger; \n\n  const addBlog = async (event) => {\n    event.preventDefault();\n    console.log('button clicked', event.target);\n\n    const blogObject = {\n      title: newTitle,\n      author: newAuthor,\n      url: newUrl,\n    };\n\n    try {\n      const returnedBlog = await blogService.create(blogObject);\n\n      setBlogs(blogs.concat(returnedBlog));\n      setNewTitle('');\n      setNewAuthor('');\n      setNewUrl('');\n    } catch (exception) {\n     \n        setErrorMessage(\n          `Adding blog exception: ${exception}`\n        );\n        setNotificationType('error');\n        setTimeout(() => {\n          setErrorMessage('');\n        }, 5000);\n\n      };\n    }\n\n \n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    console.log('logging in with', username, password);\n\n    try {\n      const user = await loginService.login({\n        username,\n        password,\n      });\n      console.log('lotoken saved ', username, password);\n\n      window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(user));\n\n      blogService.setToken(user.token);\n      console.log('lotoken saved ', user.token);\n      setUser(user);\n      setUsername('');\n      setPassword('');\n    } catch (exception) {\n      console.log('exception: ', exception);\n\n      setErrorMessage(\n        `Login error: ${exception}` \n      );\n      setNotificationType('error');\n      setTimeout(() => {\n        setErrorMessage('');\n      }, 5000);\n\n    }\n  };\n\n  const handleBlogAuthorChange = (event) => {\n    console.log(event.target.value);\n\n    setNewAuthor(event.target.value);\n  };\n\n  const handleBlogTitleChange = (event) => {\n    console.log(event.target.value);\n\n    setNewTitle(event.target.value);\n  };\n\n  const handleBlogUrlChange = (event) => {\n    console.log(event.target.value);\n\n    setNewUrl(event.target.value);\n  };\n\n  console.log(\"before login form\");\n  const loginForm = () => (\n  \n    <form onSubmit={handleLogin}>\n      <div>\n        username\n        <input\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={({ target }) => setUsername(target.value)}\n        />\n      </div>\n      <div>\n        password\n        <input\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n      <button type=\"submit\">login</button>\n    </form>\n  );\n\n  console.log(\"before login form\");\n\n\n  const blogForm = () => (\n    <form onSubmit={addBlog}>\n      <input value={newAuthor} onChange={handleBlogAuthorChange} />\n      <input value={newTitle} onChange={handleBlogTitleChange} />\n      <input value={newUrl} onChange={handleBlogUrlChange} />\n      <button type=\"submit\">save</button>\n    </form>\n  );\n\n  return (\n    <div>\n      <h1>Blogs</h1>\n      <Notification message={errorMessage} />\n\n      {user === null ? (\n        loginForm()\n      ) : (\n        <div>\n          <p>{user.name} logged in</p>\n          {blogForm()}\n\n          <ul>\n            {blogs.map((blog, i) => (\n              console.log(blog),\n              <Blog key={i} blog={blog} />\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}