(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),u=n.n(c),o=n(2),l=n.n(o),i=n(4),s=n(1),p=function(e){var t=e.blog;return r.a.createElement("div",{className:"blog"},r.a.createElement("a",{target:"_blank",href:t.url}," ",t.title," by ",t.author," "),"added by ",null===t.user?"":t.user.name)},m=function(){return r.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:16}},r.a.createElement("br",null),r.a.createElement("em",null,"BlogList app, from Andrei to Andrei"))},f=function(e){return null===e.message?null:r.a.createElement("div",{className:e.type},e.message)},b=function(e){var t=e.addBlog,n=Object(a.useState)("title..."),c=Object(s.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)("author..."),i=Object(s.a)(l,2),p=i[0],m=i[1],f=Object(a.useState)("url..."),b=Object(s.a)(f,2),d=b[0],v=b[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Create a new blog"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:u,author:p,url:d}),o(""),m(""),v("")}},r.a.createElement("input",{value:u,onChange:function(e){m(e.target.value)}}),r.a.createElement("input",{value:p,onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{value:d,onChange:function(e){v(e.target.value)}}),r.a.createElement("button",{type:"submit"},"save")))},d=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(s.a)(n,2),u=c[0],o=c[1],l={display:u?"none":""},i={display:u?"":"none"},p=function(){o(!u)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:p}})),r.a.createElement("div",null,r.a.createElement("div",{style:l},r.a.createElement("button",{onClick:p},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement("button",{onClick:p},"cancel")))})),v=n(5),g=n.n(v),E=null,h={getAll:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:E}},e.next=3,g.a.get("/api/blogs",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,g.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return g.a.put("".concat("/api/blogs","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){E="bearer ".concat(e)}},w={login:function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!0),o=Object(s.a)(u,2),v=(o[0],o[1],Object(a.useState)("")),g=Object(s.a)(v,2),E=g[0],O=g[1],j=Object(a.useState)(""),y=Object(s.a)(j,2),k=y[0],S=y[1],x=Object(a.useState)(""),B=Object(s.a)(x,2),T=B[0],A=B[1],C=Object(a.useState)(""),I=Object(s.a)(C,2),J=I[0],N=I[1],U=Object(a.useState)(null),z=Object(s.a)(U,2),L=z[0],D=z[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);D(t),h.setToken(t.token)}}),[]),Object(a.useEffect)(Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.getAll();case 3:t=e.sent,c(t),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),O("Blog viewing failed with exception: ".concat(e.t0)),S("error"),setTimeout((function(){O(""),S("")}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);var H=function(){var e=Object(i.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.create(t);case 3:a=e.sent,c(n.concat(a)),O("Blog added with success"),S("success"),setTimeout((function(){O(""),S("")}),5e3),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),O("Blog addition failed with exception: ".concat(e.t0)),S("error"),setTimeout((function(){O(""),S("")}),5e3);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.login({username:T,password:J});case 4:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),h.setToken(n.token),D(n),A(""),N(""),O("Welcome in you dear ".concat(n.name)),S("success"),setTimeout((function(){O(""),S("")}),5e3),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),O("wrong user name or password"),S("error"),setTimeout((function(){O(""),S("")}),5e3);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){return r.a.createElement("form",{onSubmit:P},r.a.createElement("div",null,"username",r.a.createElement("input",{type:"text",value:T,name:"Username",onChange:function(e){var t=e.target;return A(t.value)}})),r.a.createElement("div",null,"password",r.a.createElement("input",{type:"password",value:J,name:"Password",onChange:function(e){var t=e.target;return N(t.value)}})),r.a.createElement("button",{type:"submit"},"login"))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Blogs"),r.a.createElement(f,{message:E,type:k}),null===L?R():r.a.createElement("div",null,r.a.createElement("p",null,L.name," logged in",r.a.createElement("button",{onClick:function(){return window.localStorage.removeItem("loggedBlogAppUser"),O("Bye, ".concat(L.name)),S("success"),setTimeout((function(){O(""),S("")}),5e3),h.setToken(null),D(null),void R()}}," logout ")),r.a.createElement(d,{buttonLabel:"new blog"},r.a.createElement(b,{onSubmit:H}))),r.a.createElement("ul",null,n.map((function(e,t){return r.a.createElement(p,{key:t,blog:e})}))),r.a.createElement(m,null))};n(39);u.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4ca59dbe.chunk.js.map